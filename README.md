# -Spider
多个爬虫
# 新闻媒体爬虫项目

这是一个综合性的新闻媒体爬虫项目，用于抓取和管理来自多个主流新闻媒体平台的内容。

## 项目结构

### 官方媒体
- 人民日报系列
  - `人民日报.py` / `人民日报增量.py`
  - `人民网增量.py`
- 新华社系列
  - `新华网增量.py`
- 经济类媒体
  - `经济日报.py` / `经济日报增量.py`
  - `中国经济导报.py` / `中国经济导报增量.py`
- 其他中央媒体
  - `央广网增量.py`
  - `光明日报.py` / `光明日报增量.py`
  - `中国青年报.py` / `中国青年报增量.py`
  - `科技日报.py` / `科技日报增量.py`

### 地方媒体
- 南方系列
  - `南方日报.py` / `南方日报增量.py`
  - `南方都市报.py` / `南方都市报增量.py`
  - `南方工报.py` / `南方工报增量.py`
  - `南风窗1.py`
- 广州本地媒体
  - `广州日报.py` / `广州日报增量.py`
  - `信息时报.py` / `信息时报增量.py`
  - `羊城晚报.py` / `羊城晚报增量.py`

### 社交媒体
- 微博
  - `weibo.py` / `weibo_zl.py`
- 抖音
  - `douyin2.py` / `douyin2_zl.py`
- 微信公众号
  - `gongzhonghao.py` / `gongzhonghao_zl.py`

## 功能特点

1. 增量更新
   - 所有带有"增量"后缀的脚本都支持增量更新
   - 通过记录已爬取内容避免重复抓取
   - 支持自定义时间范围的增量更新

2. 内容采集
   - 文章正文
   - 图片和视频
   - 发布时间
   - 作者信息
   - 分类标签
   - 评论数据（部分平台支持）

3. 数据存储
   - 按日期和分类组织存储目录
   - 支持多媒体文件下载
   - 自动创建层级目录结构
   - 保存元数据信息

4. 错误处理
   - 网络请求重试机制
   - 异常日志记录
   - 断点续传支持
   - SSL证书验证处理

## 使用说明

### 环境要求
```python
Python 3.7+
requests
beautifulsoup4
lxml
schedule (部分脚本需要)
```

### 基本用法

1. 单次运行：
```python
python 媒体名称.py
```

2. 增量更新：
```python
python 媒体名称增量.py
```

3. 定时任务：
部分脚本内置了定时任务功能，会按照预设时间自动运行。

### 配置说明

1. 存储路径
   - 每个爬虫脚本都有独立的数据存储目录
   - 可通过修改`base_dir`变量自定义存储路径

2. 时间范围
   - 增量脚本支持通过修改`start_date`和`end_date`设置抓取范围
   - 默认抓取最近一天的更新

3. 代理设置
   - 支持配置HTTP/HTTPS代理
   - 可通过修改`proxies`字典配置代理服务器

## 注意事项

1. 请求频率
   - 已内置请求间隔控制
   - 建议不要修改默认的延迟设置
   - 过快的请求可能触发反爬措施

2. 内容版权
   - 抓取的内容仅供学习研究使用
   - 请遵守相关网站的使用条款
   - 注意保护原创内容版权

3. 稳定性提示
   - 网站改版可能导致脚本失效
   - 建议定期检查和更新脚本
   - 使用try-except处理可能的异常

## 维护说明

1. 脚本命名规则
   - 基础版本：`媒体名称.py`
   - 增量版本：`媒体名称增量.py`
   - 专题版本：`媒体名称_zl.py`

2. 代码结构
   - 每个脚本都是独立的爬虫类
   - 包含必要的注释说明
   - 遵循PEP 8编码规范

3. 更新记录
   - 代码版本通过文件修改时间跟踪
   - 重要更新请在脚本开头注释说明
   - 保留历史版本便于回溯

## 常见问题

1. SSL错误
   - 检查证书设置
   - 尝试更新requests库
   - 必要时可禁用证书验证

2. 内容抓取失败
   - 检查选择器是否更新
   - 验证登录状态
   - 检查反爬措施是否升级

3. 文件保存错误
   - 检查目录权限
   - 确保磁盘空间充足
   - 验证文件名合法性

## 后续优化

1. 计划功能
   - 统一的配置管理
   - 分布式抓取支持
   - 数据库存储选项
   - 可视化管理界面

2. 改进方向
   - 提高代码复用性
   - 优化内存使用
   - 增强错误处理
   - 完善日志系统

## 贡献指南

1. 提交规范
   - 清晰的提交信息
   - 完整的测试用例
   - 详细的文档更新

2. 开发建议
   - 保持代码简洁
   - 注重性能优化
   - 兼顾可维护性
   - 做好异常处理 
